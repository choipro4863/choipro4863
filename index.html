<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>보험 & BMI 계산기(약관본부)</title>
    <style>
        /* 결과값 스타일 */
        .result {
            background-color: yellow;
            font-size: 24px;
            font-weight: bold;
            padding: 10px;
            display: inline-block;
            border: 2px solid #000;
            border-radius: 5px;
            margin-top: 10px;
        }

        /* 제목 스타일 */
        .main-title {
            background-color: lightblue;
            border: 2px solid #000;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        /* 폼 스타일 */
        input {
            font-size: 16px;
            padding: 8px;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <!-- 제목 -->
    <h1 class="main-title">보험나이 & BMI계산기(약관본부)</h1>

    <!-- 출생일 입력 -->
    <h2>출생일 입력</h2>
    <label for="birthDate">출생일: </label>
    <input type="date" id="birthDate" oninput="calculateInsuranceAgeAndRenewalDate()"><br><br>

    <!-- 보험 나이 및 상령일 결과 -->
    <p id="insuranceAgeResult" class="result">보험 나이: -</p>
    <p id="renewalDateResult" class="result">다가오는 상령일: -</p>

    <!-- BMI 계산 -->
    <h2>BMI 계산(28미만!!)</h2>
    <label for="height">키 (cm): </label>
    <input type="number" id="height" placeholder="키 입력" oninput="calculateBMI()"><br>
    <label for="weight">체중 (kg): </label>
    <input type="number" id="weight" placeholder="체중 입력" oninput="calculateBMI()"><br>
    <p id="bmiResult" class="result">BMI: -</p>
    <p id="bmiSuggestion" style="display: none; font-weight: bold; color: blue;">
        <!-- 추가 메시지 표시 -->
    </p>

    <script>
        // 보험 나이와 상령일 계산
        function calculateInsuranceAgeAndRenewalDate() {
            const birthDateInput = document.getElementById("birthDate").value;
            if (!birthDateInput) {
                document.getElementById("insuranceAgeResult").innerText = "보험 나이: -";
                document.getElementById("renewalDateResult").innerText = "다가오는 상령일: -";
                return;
            }

            const birthDate = new Date(birthDateInput);
            const currentDate = new Date();

            // 생일 기준 나이 계산
            let insuranceAge = currentDate.getFullYear() - birthDate.getFullYear();

            // 현재 연도의 생일 날짜 계산
            const thisYearBirthday = new Date(currentDate.getFullYear(), birthDate.getMonth(), birthDate.getDate());

            // 생일이 지나지 않았으면 보험 나이 +1
            if (currentDate < thisYearBirthday) {
                insuranceAge -= 1;
            }

            // 보험 나이: 가장 가까운 생일 기준으로 나이를 계산
            document.getElementById("insuranceAgeResult").innerText = `보험 나이: ${insuranceAge + 1}세`;

            // 상령일 계산
            const sixMonthsAgo = new Date(birthDate);
            sixMonthsAgo.setMonth(sixMonthsAgo.getMonth() - 6);

            let renewalDate = new Date(sixMonthsAgo);
            renewalDate.setFullYear(currentDate.getFullYear());

            // 상령일이 현재 날짜를 지났다면 다음 해로 갱신
            if (renewalDate < currentDate) {
                renewalDate.setFullYear(currentDate.getFullYear() + 1);
            }

            // 결과 출력
            const formattedRenewalDate = renewalDate.toISOString().split("T")[0];
            document.getElementById("renewalDateResult").innerText = `다가오는 상령일: ${formattedRenewalDate}`;
        }

        // BMI 계산 및 추가 메시지
        function calculateBMI() {
            const height = parseFloat(document.getElementById("height").value);
            const weight = parseFloat(document.getElementById("weight").value);

            if (!height || !weight) {
                document.getElementById("bmiResult").innerText = "BMI: 입력값을 확인하세요.";
                document.getElementById("bmiSuggestion").style.display = "none";
                return;
            }

            const heightInMeters = height / 100;
            const bmi = (weight / (heightInMeters * heightInMeters)).toFixed(2);

            let status = "";
            if (bmi < 18.5) status = "저체중";
            else if (bmi < 25) status = "정상";
            else if (bmi < 30) status = "과체중";
            else status = "비만";

            document.getElementById("bmiResult").innerText = `BMI: ${bmi} (${status})`;

            // BMI가 28 이상일 때만 안내 메시지 표시
            if (bmi >= 28) {
                // 현재 체중 기준 필요한 키
                const minHeightForBMI28 = Math.sqrt(weight / 28) * 100;

                // 현재 키 기준 필요한 체중
                const maxWeightForBMI28 = 28 * heightInMeters * heightInMeters;

                const suggestionMessage = `
                    보험 가입을 위해:<br>
                    현재 체중 기준: 키는 ${minHeightForBMI28.toFixed(1)}cm 이상이어야 합니다.<br>
                    현재 키 기준: 몸무게는 ${maxWeightForBMI28.toFixed(1)}kg 이하여야 합니다.
                `;
                document.getElementById("bmiSuggestion").innerHTML = suggestionMessage;
                document.getElementById("bmiSuggestion").style.display = "block";
            } else {
                document.getElementById("bmiSuggestion").style.display = "none";
            }
        }
    </script>
</body>
<footer>
  <p>만든사람 : 최기영 010-7449-4863</p>
</footer>
</html>
